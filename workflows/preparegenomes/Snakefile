configfile:"/home/projects/ku-cbd/people/nurher/holoflow/workflows/preparegenomes/config.yaml"

rule get_holopath:
    input:
        expand("{holopath}", holopath=config['holopath'])


################################################################################################################
############################################       PREPAREGENOMES     ###########################################
################################################################################################################

##
# DB indexing
##

rule db_index:
    input:
        db=expand("{DB_path}", DB_path=config['DB_path'])
    output:
        idx_db="{projectpath}/PRG/{input.db_ID}.fna.sa"
    shell:
        """
        python {rules.get_holopath.input}/bin/holo-db_index.py -db {input.db} -idb {output.idx_db}
        """


rule check_compress:
    input:
        db=expand("{DB_path}", DB_path=config['DB_path']),
        idx_db="{projectpath}/PRG/{input.db_ID}.fna.sa"
    output:
        check_file="{projectpath}/PRG/ok.txt"
    shell:
        """
        python {rules.get_holopath.input}/bin/holo-check_compress.py -db {input.db} -check {output.check_file}
        """
